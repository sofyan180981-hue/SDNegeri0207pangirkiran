<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta Tags -->
    <meta property="og:title" content="SD Negeri 0207 Pangirkiran">
    <meta property="og:description" content="Website Resmi SD Negeri 0207 Pangirkiran. Berakhlak Mulia, Berilmu, Berprestasi.">
    <meta property="og:image" content="banner-sekolah.jpg">
    
    <title>SD Negeri 0207 Pangirkiran</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-pattern {
            background-color: #ffffff;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239CA3AF' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-spin-slow { animation: spin 3s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot, deleteDoc, doc, writeBatch, getDocs, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const { useState, useEffect } = React;
        
        // --- FIREBASE CONFIG ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
             apiKey: "AIzaSyCm6KUtiBdOYrflSf8lf-Y1BD9hPfC1qII",
             authDomain: "ppdb-5ec66.firebaseapp.com",
             projectId: "ppdb-5ec66",
             storageBucket: "ppdb-5ec66.firebasestorage.app",
             messagingSenderId: "244653808258",
             appId: "1:244653808258:web:4e65275dd7548289fd329b",
             measurementId: "G-C29VCC39LN"
        };
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'sdn-0207-default';
        let db, auth, app;

        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
        } catch (error) {
            console.error("Firebase init error:", error);
        }

        // --- INITIAL DATA (HARDCODED RESTORED) ---

        const initialStatsData = [
            { year: "2021/2022", L: 6, P: 10 }, { year: "2022/2023", L: 10, P: 10 },
            { year: "2023/2024", L: 12, P: 13 }, { year: "2024/2025", L: 5, P: 13 },
            { year: "2025/2026", L: 12, P: 9 },
        ];

        const initialTeacherData = [
            { name: "Nuraini Nasution, S.Pd.I", role: "Kepala Sekolah", nip: "197004121993082001", nuptk: "1744748650220002", birth: "Huta Pasir, 12 April 1970", education: "S1 Pendidikan Agama Islam", certification: "Guru Kelas", university: "STIT PL GUNUNG TUA", address: "Desa Pangirkiran Dolok", image: "nuraini1.jpg" },
            { name: "Warda Kembang Bunga Harahap", role: "Guru Kelas 3", nip: "197101031992022001", nuptk: "8435749651300022", birth: "Sihoda-Hoda, 03 Januari 1971", education: "S1 Pendidikan Agama Islam", certification: "Guru Kelas", university: "STIT PL GUNUNG TUA", address: "Desa Pangirkiran Dolok", image: "warda.jpg" },
            { name: "Adanan Siregar", role: "Guru SBK", nip: "196709121992031005", nuptk: "8244745648200063", birth: "Binanga, 12 September 1967", education: "SLTA Sederajat", certification: "-", university: "SPG Swasta Widyasana", address: "Desa Binanga", image: "adanan.jpg" },
            { name: "Sofyan Tanjung", role: "Guru Mapel PJOK", nip: "198109182010011021", nuptk: "8250759661200033", birth: "Batang Toru, 18 September 1981", education: "S1 Pendidikan Olahraga", certification: "PJOK", university: "Unimed", address: "Desa Pangirkiran Dolok", image: "sofyan.jpg" },
            { name: "Tirohima Harahap", role: "Guru Kelas 1", nip: "197611242008012002", nuptk: "1456754655300013", birth: "Aek Nabara Tonga, 24 Nov 1976", education: "S1 PAI", certification: "Guru Kelas", university: "STIT PL GUNUNG TUA", address: "Desa Pangirkiran Dolok", image: "tirohima.jpg" },
            { name: "Rokimah Siregar", role: "Guru Kelas 2", nip: "196908132007012006", nuptk: "7145747651300003", birth: "PP Makmur, 13 Agt 1969", education: "S1 PAI", certification: "Guru Kelas", university: "STAIS Dairi", address: "Desa Pangirkiran Dolok", image: "rokimah.jpg" },
            { name: "Hotmaida Pohan", role: "Guru Kelas 4", nip: "198702082023212032", nuptk: "1540765667210032", birth: "Pasar Binanga, 08 Feb 1987", education: "S1 PGSD", certification: "Guru Kelas", university: "Unimed", address: "Desa Pangirkiran Dolok", image: "hotma.jpg" },
            { name: "Rosmina Tamba", role: "Guru Mapel PAI", nip: "198810252023212015", nuptk: "5357766667130123", birth: "Pangirkiran, 25 Okt 1988", education: "S1 PAI", certification: "PAI", university: "IAIN Padangsidimpuan", address: "Desa Gulangan", image: "rosmina.jpg" },
            { name: "Nora Hanifah Pane", role: "Guru Kelas 6", nip: "-", nuptk: "3942775676230072", birth: "Padang Matinggi, 10 Juni 1997", education: "S1 BK", certification: "Guru PAUD", university: "UMSU", address: "Padang Matinggi", image: "nora.jpg" },
            { name: "Rukiatul Marjulia Ujung", role: "Guru Kelas 5", nip: "-", nuptk: "8635774675230272", birth: "Medan, 03 Maret 1996", education: "S1 PGSD", certification: "Guru Kelas", university: "UNU Sumut", address: "Padang Matinggi", image: "rukiatul.jpg" },
            { name: "Syaroh Silitonga", role: "Guru Mapel B.Ing", nip: "-", nuptk: "-", birth: "Morang, 03 Okt 1996", education: "S1 PAI", certification: "-", university: "IAIN Padangsidimpuan", address: "Desa Pangirkiran Dolok", image: "syaroh.jpg" },
            { name: "Siti Hoyriya Harahap", role: "Guru P5", nip: "-", nuptk: "-", birth: "Rura Burangir, 17 Juli 2001", education: "S1 PGMI", certification: "-", university: "UIN Syekh Ali Hasan", address: "Desa Pangirkiran Dolok", image: "hoiriyah.jpg" },
            { name: "Romaito Harahap", role: "Guru Mapel Seni Tari", nip: "-", nuptk: "-", birth: "Maranti, 22 Jan 2002", education: "S1 Pend. Vokasional", certification: "-", university: "IPTS", address: "Desa Pangirkiran Dolok", image: "romaito.jpg" },
            { name: "Muhammad Johan Pohan", role: "Penjaga Sekolah", nip: "-", nuptk: "0646766667130212", birth: "Padang Lawas, 1 Nov 1975", education: "SLTA", certification: "-", university: "SMA N 1 Barteng", address: "Desa Pangirkiran Dolok", image: "johan.jpg" },
        ];

        const initialStudentData = {
            "Kelas 1": [
                { name: "ADIBA UFAIRAH SIREGAR", gender: "P", nisn: "3188117570", birth: "Pangirkiran Dolok, 19/10/2018", parent: "Ahmad Rizal Siregar / Ermina Harahap" },
                { name: "AHMAD ALI SUTEN HARAHAP", gender: "L", nisn: "3185521637", birth: "Janji Raja, 21/11/2018", parent: "Muhammad Rifai Harahap / Nila Wati Siregar" },
                { name: "AHMAD PARTOMUAN DALIMUNTHE", gender: "L", nisn: "3191744902", birth: "PANGIRKIRAN DOLOK, 23/05/2019", parent: "WILDAN DALIMUNTE / PEBRIANTI SIREGAR" },
                { name: "ALFIANSYAH RAMADHAN HARAHAP", gender: "L", nisn: "3190554100", birth: "Janji Raja, 28/05/2019", parent: "Maradoli Harahap / Lanniari Siregar" },
                { name: "ALIF SYAHBANA POHAN", gender: "L", nisn: "3194100991", birth: "Pangirkiran Dolok, 19/04/2019", parent: "Saddam Husein Pohan / Riski Romaito Siregar" },
                { name: "ALIKA RAHMA DONGORAN", gender: "P", nisn: "3184647750", birth: "PANGIRKIRAN DOLOK, 09/06/2018", parent: "ROSULUDDIN DONGORAN / TETTI HERAWATI HARAHAP" },
                { name: "AZFAR ROBBANI", gender: "L", nisn: "3197210537", birth: "Maranti, 26/08/2019", parent: "Sundung Pohan / Ida Nerry" },
                { name: "BINTANG PERMATA INDAH POHAN", gender: "P", nisn: "3189349447", birth: "Pangirkiran Dolok, 20/09/2018", parent: "Toras Pohan / Lannur Siregar" },
                { name: "BUNGA LESTARI SIREGAR", gender: "P", nisn: "3195063799", birth: "PANGIRKIRAN DOLOK, 24/05/2019", parent: "ALI MUKTI SIREGAR / TETTI MAHARANI PAKPAHAN" },
                { name: "DIMAS SETIAWAN POHAN", gender: "L", nisn: "3185005035", birth: "Pangirkiran Dolok, 09/09/2018", parent: "Sahala Pohan / Aisah" },
                { name: "IFRA MIKAYLA DONGORAN", gender: "P", nisn: "3193072330", birth: "Pangirkiran Dolok, 24/12/2019", parent: "Ilham Dongoran / Ita Purnama Sari" },
                { name: "ISNANDAR HAKIM SIREGAR", gender: "L", nisn: "3177507169", birth: "Pangirkiran Dolok, 04/09/2017", parent: "Ahmad Rifai Siregar / Jaleha Pohan" },
                { name: "JEPRI HANDIKA POHAN", gender: "L", nisn: "3197339464", birth: "Pangirkiran Dolok, 10/04/2019", parent: "Mangsur Pohan / Tiaisa Nasution" },
                { name: "MUHAMMAD RAMDAN ALFAREZEL", gender: "L", nisn: "3186827643", birth: "Bangkuang, 19/11/2018", parent: "Wandi Syah Putra / Hotma Diani" },
                { name: "MUHAMMAD RISKY HASIBUAN", gender: "L", nisn: "3180030163", birth: "SIBUHUAN, 20/09/2018", parent: "SUTAN DARWIS HASIBUAN / HOTMAIDA POHAN" },
                { name: "NILLA SARI", gender: "P", nisn: "3198504738", birth: "Lampung Barat, 31/01/2019", parent: "Suhendri / Sugiyanti" },
                { name: "PAZRI AMINANSYAH POHAN", gender: "L", nisn: "3197458201", birth: "PANGIRKIRAN DOLOK, 05/05/2019", parent: "PARTAHANAN POHAN / ROSLAN HASIBUAN" },
                { name: "PUTRI IRMA SURYANI NASUTION", gender: "P", nisn: "3199339923", birth: "Kabupaten Padang Lawas, 04/03/2019", parent: "Ali Erwin Nasution / Erna Harahap" },
                { name: "RAFA HABIB POHAN", gender: "L", nisn: "3194161477", birth: "BINANGA, 19/01/2019", parent: "ERWIN POHAN / MARDIANI SIREGAR" },
                { name: "ROSMIATI SIREGAR", gender: "P", nisn: "3180089119", birth: "Janji Raja, 27/10/2018", parent: "Arsad Siregar / Maisaroh" },
                { name: "VIOLA ARSA NASUTION", gender: "P", nisn: "3193761490", birth: "PANGIRKIRAN DOLOK, 23/06/2019", parent: "ALI ARMAN NASUTION / HOTNIDA" },
                { name: "NABILA AYUNDA TAMBA", gender: "P", nisn: "3193824581", birth: "Siboris Lombang, 04/07/2019", parent: "Imam Saleh Tamba / Siti Agen Masderia Hasibuan" }
            ],
            "Kelas 2": [
                { name: "AKRAM AL MUBAROK HARAHAP", gender: "L", nisn: "-", birth: "Padang Garugur, 31/05/2018", parent: "Ilham Fauzi Harahap / Nursaima Siregar" },
                { name: "ALI NIKMAT SUANGKUPON POHAN", gender: "L", nisn: "3178079819", birth: "Pangirkiran Dolok, 19/10/2017", parent: "Berlin Pohan / Nisra Dewi Harahap" },
                { name: "AQILA PUTRI POHAN", gender: "P", nisn: "3177770035", birth: "Pangirkiran Dolok, 16/08/2017", parent: "Saddam Husein Pohan / Riski Romaito Siregar" },
                { name: "CLARASATI HARAHAP", gender: "P", nisn: "3185197784", birth: "Siboris Lombang, 18/02/2018", parent: "Sehat Harahap / Nur Hotna Siregar" },
                { name: "DANI ALRAID RAFIYAH HARAHAP", gender: "L", nisn: "3185677349", birth: "Pangirkiran Dolok, 31/07/2018", parent: "Ali Akbar Harahap / Saloma Siregar" },
                { name: "NADIRA QISTY SIREGAR", gender: "P", nisn: "3182692109", birth: "KABUPATEN PADANG LAWAS, 14/05/2018", parent: "Muhammad Toha Siregar / Nuraisyah Harahap" },
                { name: "NASRUN HABIBISIREGAR", gender: "L", nisn: "3178358370", birth: "KABUPATEN PADANG LAWAS, 28/04/2017", parent: "Awaluddin Siregar / Tiaslina Hasibuan" },
                { name: "NISFA RAHMADHANI POHAN", gender: "P", nisn: "3189912414", birth: "PANGIRKIRAN DOLOK, 01/05/2018", parent: "INDRA GUNAWAN.P / NUR INDAH SARI" },
                { name: "NUR KHORIAH HASIBUAN", gender: "P", nisn: "3179453996", birth: "Pangirkiran Dolok, 09/08/2017", parent: "Barumun Hasibuan / Nurhida Hannum Nasution" },
                { name: "NUR SYAHMA SIREGAR", gender: "P", nisn: "3174984593", birth: "Gunung Tua, 16/10/2017", parent: "Mukhlis Siregar / Yusri Dawati Harahap" },
                { name: "RAFLY KHOTIF SIREGAR", gender: "L", nisn: "3187452155", birth: "Pangirkiran Dolok, 28/12/2018", parent: "Ahmad Rohim Siregar / Katija Namora Harahap" },
                { name: "ROSINTAN NASUTION", gender: "P", nisn: "3172779015", birth: "Pangirkiran Dolok, 30/06/2017", parent: "Ali Arman Nst / Hotnida" },
                { name: "ZAHIRA ALIFA SIREGAR", gender: "P", nisn: "3172167721", birth: "Pangirkiran Dolok, 03/11/2017", parent: "Ahmad Rizal Siregar / Ermina Harahap" }
            ],
            "Kelas 3": [
                { name: "AHMAD YANI SIREGAR", gender: "L", nisn: "3171525607", birth: "JANJI RAJA, 21/08/2017", parent: "ARSAD SIREGAR / MAISAROH" },
                { name: "ALI ANSOR POHAN", gender: "L", nisn: "3168569900", birth: "PANGIRKIRAN DOLOK, 03/10/2016", parent: "YAHYA POHAN / NUR AZIZAH HARAHAP" },
                { name: "ALWY SYAHPUTRA HARAHAP", gender: "L", nisn: "3175035371", birth: "BARA BATU, 16/09/2017", parent: "MARADOLI HARAHAP / LANNIARI SIREGAR" },
                { name: "AMIN SYAH PUTRA SIREGAR", gender: "L", nisn: "3171868158", birth: "BOGOR, 11/12/2017", parent: "SAIDI SIREGAR / UMMI KALSUM POHAN" },
                { name: "AMRUDDIN HARAHAP", gender: "L", nisn: "3177730401", birth: "PANGIRKIRAN DOLOK, 23/03/2017", parent: "ADIAN HARAHAP / MURTINA SIREGAR" },
                { name: "ARSYA ADE MUHARRAM", gender: "L", nisn: "3171724918", birth: "SIBUHUAN, 21/09/2017", parent: "IRWANSYAH PUTRA / ROSITA WAHYUNI POHAN" },
                { name: "AYDIL ASMAN HARAHAP", gender: "L", nisn: "3179801618", birth: "PANGIRKIRAN DOLOK, 08/07/2017", parent: "ARIPIN HARAHAP / TIAPESA WANITA SIREGAR" },
                { name: "DARLENA HARAHAP", gender: "P", nisn: "3172149443", birth: "PANGIRKIRAN DOLOK, 23/04/2017", parent: "TAUFIK HARAHAP / NUR ALIYAH HASIBUAN" },
                { name: "DEWI SANTI POHAN", gender: "P", nisn: "3165396449", birth: "PANGIRKIRAN DOLOK, 09/08/2016", parent: "MANGSUR POHAN / TIAISA NASUTION" },
                { name: "FRISKA ARDILA", gender: "P", nisn: "3164795955", birth: "PANGIRKIRAN DOLOK, 30/12/2016", parent: "ANTONI / NURYANI" },
                { name: "GENA LAMSURI HARAHAP", gender: "P", nisn: "3168272127", birth: "PANGIRKIRAN DOLOK, 10/12/2016", parent: "SOLEMAN HARAHAP / ELPI IDAIA SIREGAR" },
                { name: "HAMZAH POHAN", gender: "L", nisn: "3178970389", birth: "PANGIRKIRAN DOLOK, 10/04/2017", parent: "ISHAK POHAN / MARDIANI SIREGAR" },
                { name: "ISRAN P. SIREGAR", gender: "L", nisn: "3166074863", birth: "JANJI RAJA, 22/08/2016", parent: "MUHAMMAD TOHIR SIREGAR / ARNIDA HSB" },
                { name: "JULIANA HARAHAP", gender: "P", nisn: "3178043058", birth: "PANGIRKIRAN DOLOK, 12/07/2017", parent: "ASPAN HARAHAP / HAIRANI SIREGAR" },
                { name: "JULIANI HARAHAP", gender: "P", nisn: "3178840581", birth: "PANGIRKIRAN DOLOK, 12/07/2017", parent: "ASPAN HARAHAP / HAIRANI SIREGAR" },
                { name: "LAMRO HARAHAP", gender: "P", nisn: "3162699895", birth: "PANGIRKIRAN DOLOK, 13/11/2016", parent: "ARSAD HARAHAP / PARIDA SIMAMORA" },
                { name: "MUHAMMAD ALI RAMBE", gender: "L", nisn: "3163865943", birth: "-JANJI RAJA, 15/12/2016", parent: "SARIP MUDA RAMBE / ASMINAR" },
                { name: "NUR INTAN POHAN", gender: "P", nisn: "3169674460", birth: "PANGIRKIRAN DOLOK, 27/11/2016", parent: "- / MARNI MARBUN" },
                { name: "NURI YANTI POHAN", gender: "P", nisn: "3164289100", birth: "PANGIRKIRAN DOLOK, 24/08/2016", parent: "AKHIR KALAM POHAN / KASMILAWATI HARAHAP" },
                { name: "PUAN RAHMALIANA HASIBUAN", gender: "P", nisn: "3162837563", birth: "JANJI RAJA, 10/09/2016", parent: "EDI SAPUTRA HASIBUAN / MASDELINA NST" },
                { name: "RAJA MINTA ITO NASUTION", gender: "L", nisn: "3170706957", birth: "KABUPATEN PADANG LAWAS, 02/01/2017", parent: "ALI ERWIN NASUTION / ERNA HARAHAP" },
                { name: "RASI ADELIYANI HASIBUAN", gender: "P", nisn: "3161535334", birth: "SIBUHUAN, 11/10/2016", parent: "BASARUDDIN HASIBUAN / IRMA YANTI" },
                { name: "RISKA DELILAN SIREGAR", gender: "P", nisn: "3177818611", birth: "PANGIRKIRAN DOLOK, 11/06/2017", parent: "ALI MUKTI SIREGAR / TETTI MAHARANI PAKPAHAN" },
                { name: "SHAIMA PUTRI SIREGAR", gender: "P", nisn: "3171172119", birth: "PANGIRKIRAN DOLOK, 13/01/2017", parent: "IRWAN SYAH SIREGAR / NURHAWANI HARAHAP" },
                { name: "SYAHREL ARDIANSAH POHAN", gender: "L", nisn: "3166690796", birth: "SIHOPUK BARU, 10/12/2016", parent: "YAHYA POHAN / EVI SANURHAYATI HASIBUAN" }
            ],
            "Kelas 4": [
                { name: "ABDUL ALIM RAMADHAN PANE", gender: "L", nisn: "3163402650", birth: "MEDAN, 26/06/2016", parent: "Huzaipan Pane / FATIMAH POHAN" },
                { name: "AIRIN ZAHRA SIREGAR", gender: "P", nisn: "3155056627", birth: "Janji Raja, 27/11/2015", parent: "Parlindungan Siregar / Siti Ambia Harahap" },
                { name: "AMIR SALIM HARAHAP", gender: "L", nisn: "3165437228", birth: "Pangirkiran Dolok, 12/04/2016", parent: "Idam Khalid Harahap / Eka Asroini Pohan" },
                { name: "AYU ROSMALINA POHAN", gender: "P", nisn: "3166064136", birth: "Pangirkiran Dolok, 13/02/2016", parent: "Jamaluddin Pohan / Tiapsah Harahap" },
                { name: "FAHMI DZAKWAN POHAN", gender: "L", nisn: "3161254144", birth: "Pangirkiran Dolok, 15/01/2016", parent: "Erwin Pohan / Mardiani Siregar" },
                { name: "GINDO MARTUA POHAN", gender: "L", nisn: "3155889350", birth: "Pangirkiran Dolok, 20/09/2015", parent: "Asnan Pohan / Ita Daulay" },
                { name: "HAFNI RAISA SIREGAR", gender: "P", nisn: "3160357064", birth: "Janji Raja, 01/01/2016", parent: "Mara Udin Siregar / Timahara Harahap" },
                { name: "HENDRA GUNAWAN SIREGAR", gender: "L", nisn: "3166130182", birth: "Pangirkiran Dolok, 18/05/2016", parent: "Ahmad Rizal Siregar / Ermina Harahap" },
                { name: "IQBAL HABIBI SIREGAR", gender: "L", nisn: "3151780607", birth: "Janji Raja, 14/09/2015", parent: "Mulia Efendi Siregar / Ermilan Nst" },
                { name: "KHILDAFATHMAH POHAN", gender: "P", nisn: "3164142024", birth: "Pangirkiran Dolok, 30/03/2016", parent: "Kholiluddin Pohan / Dermilan Sir" },
                { name: "MUHAMMAD FADLY SIREGAR", gender: "L", nisn: "3168945967", birth: "Janji Raja, 24/09/2016", parent: "Umar Dani Siregar / Sariam Harahap" },
                { name: "MUHAMMAD ROUF SIREGAR", gender: "L", nisn: "3158138356", birth: "Pangirkiran Dolok, 03/11/2015", parent: "MUkhlis Siregar / Yusri Dawati Harahap" },
                { name: "NUR KAMILA HARAHAP", gender: "P", nisn: "3158075411", birth: "Pangirkiran Dolok, 31/12/2015", parent: "Samaun Harahap / Bangsawin" },
                { name: "PUTRI RAHAYU SIREGAR", gender: "P", nisn: "3161976876", birth: "Sibuhuan, 28/05/2016", parent: "ANWAR SAHABAN SIREGAR / Kardina" },
                { name: "RAJA DIMA PANDAWA SIREGAR", gender: "L", nisn: "3154535441", birth: "Pangirkiran, 03/10/2015", parent: "Mara Saman Siregar / Maswani Harahap" },
                { name: "SAIMA PUTRI HARAHAP", gender: "P", nisn: "3167828138", birth: "Janji Raja, 05/03/2016", parent: "Muhammad Rifai Harahap / NIla Wati Siregar" },
                { name: "SAKINAH MARWAH HASIBUAN", gender: "P", nisn: "3164344593", birth: "ACEH TAMIANG, 11/11/2016", parent: "ABDURRASYAD HASIBUAN / GABENA POHAN" },
                { name: "SUCI NAPISAH POHAN", gender: "P", nisn: "3166646775", birth: "KABUPATEN PADANG LAWAS, 30/04/2016", parent: "Rahmad Pohan / JUNAIDA SIREGAR" },
                { name: "SYAIR ZAIDAN POHAN", gender: "L", nisn: "3160186329", birth: "Pangirkiran Dolok, 26/01/2016", parent: "Muhammad Johan Pohan / Siti Roilan Siregar" },
                { name: "ULFA AMELIA HARAHAP", gender: "P", nisn: "3153891435", birth: "Pekanbaru, 30/11/2015", parent: "Mahyuddin Harahap / Asroni Pohan" }
            ],
            "Kelas 5": [
                { name: "ADINDA NURJIAH", gender: "P", nisn: "3143525705", birth: "Pangirkiran Dolok, 27/11/2014", parent: "Najili / Simaputra SImamora" },
                { name: "AFRIJAL SIREGAR", gender: "L", nisn: "3152068753", birth: "Gunungtua, 15/01/2015", parent: "Saidi Siregar / Ummi Kalsum Pohan" },
                { name: "AMRIL MUHAIMIN DONGORAN", gender: "L", nisn: "3152090925", birth: "Pangirkiran Dolok, 18/05/2015", parent: "Ilham Dongoran / Ita Purnama Sari" },
                { name: "ANISA BALQIS HARAHAP", gender: "P", nisn: "3150018793", birth: "Selangor, 21/12/2015", parent: "TORAS NAULI / SITI MAWAR POHAN" },
                { name: "ARIKA ZAHRA", gender: "P", nisn: "3143894563", birth: "Maranti, 19/06/2014", parent: "SUNDUNG POHAN / Ida Nerry" },
                { name: "ARY PRATAMA HARAHAP", gender: "L", nisn: "3151815947", birth: "Pangirkiran Dolok, 16/01/2015", parent: "Taufik Harahap / Nur Aliyah Hasibuan" },
                { name: "DIRA NOVERIANI SIREGAR", gender: "P", nisn: "3145960583", birth: "Pangirkiran Dolok, 27/11/2014", parent: "Irwan Syah Siregar / Nurhawani Harahap" },
                { name: "ERIN SAHRI", gender: "P", nisn: "3147392212", birth: "Pangirkiran Dolok, 12/11/2014", parent: "Muhammad Israk / Rita" },
                { name: "GONG MATUA SIREGAR", gender: "L", nisn: "3157706063", birth: "Janji Raja, 25/03/2015", parent: "Muhammad Toha Siregar / NURAISYAH HARAHAP" },
                { name: "LAILA SERLINA HARAHAP", gender: "P", nisn: "3159359390", birth: "Padang Garugur, 23/03/2015", parent: "Ilham Fauzi Harahap / Nursaima Siregar" },
                { name: "MASLIANI SIREGAR", gender: "P", nisn: "3146715094", birth: "Janji Raja, 01/12/2014", parent: "Arsad Siregar / Maisaroh" },
                { name: "NUR AZIJAH HARAHAP", gender: "P", nisn: "3151567532", birth: "Janji Raja, 26/06/2015", parent: "Irpan Harahap / Nur 'Ainun Siregar" },
                { name: "NURUL HAFIZA TAMBA", gender: "P", nisn: "3151959195", birth: "Pangirkiran Dolok, 06/06/2015", parent: "Saparuddin Tamba / Erlina Harahap" },
                { name: "RAHMAT HORIZON DONGORAN", gender: "L", nisn: "3141172612", birth: "Pangirkiran Dolok, 22/11/2014", parent: "Mara Sutan Dongoran / Tirohima Harahap" },
                { name: "RAISAH POHAN", gender: "P", nisn: "3151815960", birth: "Pangirkiran Dolok, 12/06/2015", parent: "Abdul Rahman Pohan / Derlina Wahyuni Hasibuan" },
                { name: "SAFARUDDIN NASUTION", gender: "L", nisn: "3122275257", birth: "SISOMA, 08/02/2012", parent: "ALI ERWIN NASUTION / ERNA HARAHAP" }
            ],
            "Kelas 6": [
                { name: "AGUNG GUNAWAN POHAN", gender: "L", nisn: "3131860708", birth: "Pangirkiran Dolok, 15/09/2013", parent: "Toras Pohan / Lannur Siregar" },
                { name: "AHMAD YUNAN POHAN", gender: "L", nisn: "3148073169", birth: "Pangirkiran Dolok, 19/03/2014", parent: "Yahya Pohan / Nur Azizah Hrp" },
                { name: "ALDO SAPUTRA SIREGAR", gender: "L", nisn: "3140708324", birth: "Huristak, 07/08/2014", parent: "Parulian Siregar / Nisro Harahap" },
                { name: "ALI NURDIN SIREGAR", gender: "L", nisn: "3147994334", birth: "Pangirkiran Dolok, 26/02/2014", parent: "Ahmad Rizal SIregar / Ermina Harahap" },
                { name: "AQILAH AZAHRA NASUTION", gender: "P", nisn: "0144938468", birth: "Aceh Tamiang, 02/02/2014", parent: "Abdurrasyad Hasibuan / Gabena Pohan" },
                { name: "AZKIA ROMINDA SIREGAR", gender: "P", nisn: "3149592900", birth: "Janji Raja, 24/08/2014", parent: "Sahang / Erna" },
                { name: "BAYAN PARULIAN SIREGAR", gender: "L", nisn: "3141687112", birth: "Pangirkiran Dolok, 07/04/2014", parent: "Ahmad Rifai Siregar / Jaleha Pohan" },
                { name: "DERHANA POHAN", gender: "P", nisn: "3143064986", birth: "Pangirkiran Dolok, 15/04/2014", parent: "Ishak Pohan / Mardiani Siregar" },
                { name: "DHAFITHA NUR AZIZAH HASIBUAN", gender: "P", nisn: "3146204793", birth: "Pasir Batu, 15/03/2014", parent: "Sutan Darwis Hasibuan / Hotmaida Pohan" },
                { name: "DZUL FAKHRI TAMBA", gender: "L", nisn: "3141193712", birth: "Pangirkiran Dolok, 26/06/2014", parent: "Usman Tamba / Nurhadawiyah Siregar" },
                { name: "FERIYANTO", gender: "L", nisn: "3146454267", birth: "Pangirkiran Dolok, 22/04/2014", parent: "Muliyono / Masnuro" },
                { name: "FITRI HANDAYANI HARAHAP", gender: "P", nisn: "3145237455", birth: "Pangirkiran Dolok, 27/06/2014", parent: "Adian Harahap / Murtina Siregar" },
                { name: "INDAH DWI FITRI POHAN", gender: "P", nisn: "3140797113", birth: "Pangirkiran Dolok, 28/07/2014", parent: "Sahala Pohan / Aisah" },
                { name: "ISAR MARTUA POHAN", gender: "L", nisn: "3130460800", birth: "Pangirkiran Dolok, 27/12/2013", parent: "Imran Pohan / Marni Marbun" },
                { name: "ISRA AMALIA RIZKY SIREGAR", gender: "P", nisn: "3146955442", birth: "Janji Raja, 27/05/2014", parent: "Umar Dani Siregar / Sariam Harahap" },
                { name: "NURSAHADA HARAHAP", gender: "P", nisn: "0124966809", birth: "Sibadar, 22/12/2012", parent: "Sehat Harahap / Nurhotna Siregar" },
                { name: "PUTRI ASYIPA DONGORAN", gender: "P", nisn: "3140395552", birth: "Pangirkiran Dolok, 11/08/2014", parent: "Rosuluddin Dongoran / Tetti Herawati Harahap" },
                { name: "RAFIQI HAMLAN SIREGAR", gender: "L", nisn: "3133839630", birth: "Pangirkiran Dolok, 19/09/2013", parent: "Ahmad Rohim Siregar / Katija Namora Harahap" },
                { name: "RINI HARAHAP", gender: "P", nisn: "3141670240", birth: "Pangirkiran Dolok, 07/03/2014", parent: "Arsad Harahap / Parida Simamora" },
                { name: "SALSABILA NADIFA POHAN", gender: "P", nisn: "3146431101", birth: "Pangirkiran Dolok, 17/04/2014", parent: "Erwin Pohan / Mardiani Siregar" },
                { name: "UMMI HIDAYAH POHAN", gender: "P", nisn: "3134277679", birth: "Pangirkiran Dolok, 12/12/2013", parent: "Melki Pohan / Junaida Siregar" },
                { name: "YAHDIL PRATAMA HARAHAP", gender: "L", nisn: "3144647978", birth: "Pangirkiran Dolok, 09/03/2014", parent: "Ruslan Harahap / Aini Harahap" }
            ]
        };

        const initialFacilities = [
            { id: 1, name: "Ruang Belajar", desc: "Kelas yang nyaman dan kondusif." }, { id: 2, name: "Ruang Guru", desc: "Tempat guru berdiskusi." },
            { id: 3, name: "Perpustakaan", desc: "Koleksi buku lengkap." }, { id: 4, name: "Lab Komputer", desc: "Sarana belajar teknologi." },
            { id: 5, name: "Toilet Bersih", desc: "Fasilitas sanitasi terjaga." }, { id: 6, name: "Lapangan Olahraga", desc: "Kegiatan fisik & upacara." },
            { id: 7, name: "Ruang UKS", desc: "Layanan kesehatan pertama." },
        ];

        const initialExtracurriculars = [
            { id: 1, name: "Olahraga", desc: "Mengembangkan fisik & sportivitas." }, { id: 2, name: "Seni Tari", desc: "Melestarikan budaya." },
            { id: 3, name: "Pramuka", desc: "Membentuk karakter disiplin." },
        ];

        const initialRosterData = {
            "Kelas 1": [ {jam: 1, sen: "PKN", sel: "B.INDO", rab: "PKN", kam: "B.INDO", jum: "PJOK", sab: "MTK"}, {jam: 2, sen: "PKN", sel: "B.INDO", rab: "PKN", kam: "B.INDO", jum: "PJOK", sab: "MTK"}, {jam: 3, sen: "PAI", sel: "MTK", rab: "PKN/P5", kam: "MTK", jum: "PJOK", sab: "B.ING"}, {jam: 4, sen: "PAI", sel: "MTK", rab: "B.INDO", kam: "MTK/P5", jum: "PJOK/P5", sab: "B.ING"}, {jam: 5, sen: "PAI", sel: "SBDP", rab: "B.INDO", kam: "B.INDO", jum: "SBDP", sab: "SBDP/P5"}, {jam: 6, sen: "PAI/P5", sel: "SBDP", rab: "B.INDO/P5", kam: "B.INDO/P5", jum: "-", sab: "-"} ],
            "Kelas 2": [ {jam: 1, sen: "PKN", sel: "PJOK", rab: "B.INDO", kam: "MTK", jum: "PAI", sab: "B.INDO"}, {jam: 2, sen: "PKN", sel: "PJOK", rab: "B.INDO", kam: "MTK", jum: "PAI", sab: "B.INDO/P5"}, {jam: 3, sen: "PKN/P5", sel: "PJOK", rab: "B.INDO", kam: "MTK", jum: "PAI", sab: "B.INDO/P5"}, {jam: 4, sen: "B.INDO", sel: "PJOK/P5", rab: "MTK", kam: "B.ING", jum: "PAI/P5", sab: "SBDP"}, {jam: 5, sen: "B.INDO", sel: "PKN", rab: "MTK", kam: "B.ING", jum: "SBDP", sab: "SBDP/P5"}, {jam: 6, sen: "B.INDO", sel: "PKN", rab: "MTK/P5", kam: "SBDP", jum: "-", sab: "-"} ],
            "Kelas 3": [ {jam: 1, sen: "MTK", sel: "PKN", rab: "PKN", kam: "SBDP", jum: "PKN", sab: "PJOK"}, {jam: 2, sen: "MTK", sel: "PKN", rab: "PKN", kam: "SBDP", jum: "PKN", sab: "PJOK"}, {jam: 3, sen: "MTK", sel: "B.ING", rab: "B.INDO", kam: "MTK", jum: "PKN", sab: "PJOK"}, {jam: 4, sen: "IPAS", sel: "B.ING", rab: "PAI", kam: "B.INDO", jum: "SBDP", sab: "PJOK"}, {jam: 5, sen: "IPAS", sel: "MTK", rab: "PAI", kam: "B.INDO", jum: "SBDP", sab: "B.INDO"}, {jam: 6, sen: "B.INDO", sel: "MTK", rab: "PAI", kam: "IPAS", jum: "-", sab: "-"}, {jam: 7, sen: "B.INDO", sel: "MTK", rab: "PAI", kam: "IPAS", jum: "-", sab: "-"} ],
            "Kelas 4": [ {jam: 1, sen: "B.ING", sel: "MTK", rab: "PJOK", kam: "PKN", jum: "IPAS", sab: "SBDP"}, {jam: 2, sen: "B.ING", sel: "MTK", rab: "PJOK", kam: "PKN/P5", jum: "IPAS", sab: "SBDP/P5"}, {jam: 3, sen: "PKN", sel: "MTK", rab: "PJOK", kam: "B.INDO", jum: "MTK", sab: "B.INDO"}, {jam: 4, sen: "PKN", sel: "PAI", rab: "PJOK/P5", kam: "B.INDO/P5", jum: "MTK", sab: "B.INDO"}, {jam: 5, sen: "PKN", sel: "PAI", rab: "B.INDO", kam: "IPAS", jum: "MTK/P5", sab: "B.INDO"}, {jam: 6, sen: "SBDP", sel: "PAI", rab: "B.INDO", kam: "IPAS", jum: "-", sab: "-"}, {jam: 7, sen: "SBDP", sel: "PAI/P5", rab: "B.INDO/P5", kam: "IPAS", jum: "-", sab: "-"} ],
            "Kelas 5": [ {jam: 1, sen: "PKN", sel: "B.ING", rab: "B.INDO", kam: "PJOK", jum: "B.INDO/P5", sab: "B.ING"}, {jam: 2, sen: "PKN", sel: "IPAS", rab: "B.INDO", kam: "PJOK", jum: "B.INDO/P5", sab: "PAI"}, {jam: 3, sen: "PKN", sel: "MTK", rab: "IPAS", kam: "PJOK", jum: "MTK", sab: "PAI"}, {jam: 4, sen: "B.INDO", sel: "MTK", rab: "IPAS", kam: "PJOK/P5", jum: "MTK", sab: "PAI"}, {jam: 5, sen: "B.INDO", sel: "MTK", rab: "SBDP", kam: "B.INDO", jum: "MTK/P5", sab: "PAI/P5"}, {jam: 6, sen: "IPAS", sel: "PKN", rab: "SBDP", kam: "B.INDO", jum: "-", sab: "-"}, {jam: 7, sen: "IPAS", sel: "PKN/P5", rab: "SBDP", kam: "SBDP/P5", jum: "-", sab: "-"} ],
            "Kelas 6": [ {jam: 1, sen: "PJOK", sel: "MTK", rab: "B.INDO", kam: "B.ING", jum: "MTK", sab: "IPAS"}, {jam: 2, sen: "PJOK", sel: "MTK", rab: "B.INDO", kam: "B.ING", jum: "MTK", sab: "IPAS"}, {jam: 3, sen: "PJOK", sel: "MTK", rab: "B.INDO", kam: "SBDP", jum: "MTK", sab: "IPAS"}, {jam: 4, sen: "PJOK", sel: "B.INDO", rab: "IPAS", kam: "PAI", jum: "IPAS", sab: "B.INDO"}, {jam: 5, sen: "PKN", sel: "B.INDO", rab: "IPAS", kam: "PAI", jum: "SBDP", sab: "B.INDO"}, {jam: 6, sen: "PKN", sel: "SBDP", rab: "PKN", kam: "PAI", jum: "-", sab: "-"}, {jam: 7, sen: "PKN", sel: "SBDP", rab: "PKN", kam: "PAI", jum: "-", sab: "-"} ]
        };

        const initialCalendars = [
            {date: "1-12 Juli 2026", event: "Libur Semester Genap", type: "libur"},
            {date: "13 Juli 2026", event: "Hari Pertama Sekolah", type: "sekolah"},
            {date: "17 Agt 2026", event: "HUT Kemerdekaan RI", type: "nasional"},
            {date: "8-13 Des 2026", event: "Ujian Semester Ganjil", type: "ujian"},
            {date: "20 Des 2026", event: "Penerimaan Raport", type: "sekolah"},
            {date: "1 Jan 2027", event: "Tahun Baru Masehi 2027", type: "libur"},
            {date: "17 Feb 2027", event: "Tahun Baru Imlek", type: "libur"},
            {date: "16-18 Mar 2027", event: "Libur Ramadhan 1448H", type: "libur"},
            {date: "20-25 Mar 2027", event: "Libur Idul Fitri 1448H", type: "libur"},
            {date: "8-13 Juni 2027", event: "Ujian Semester Genap", type: "ujian"},
            {date: "20 Juni 2027", event: "Penerimaan Raport", type: "sekolah"}
        ];

        const initialNewsData = [
            { id: 1, title: "Pelaksanaan ANBK Kelas 5", date: "22 September 2025", category: "Kegiatan", content: "Kegiatan ANBK berjalan lancar.", image: "https://placehold.co/600x400?text=ANBK+2025" },
            { id: 2, title: "Pengumuman Libur", date: "20 Desember 2025", category: "Pengumuman", content: "Libur semester ganjil dimulai.", image: "https://placehold.co/600x400?text=Pengumuman" },
            { id: 3, title: "Juara 1 Lomba Lari", date: "17 Agustus 2025", category: "Prestasi", content: "Selamat kepada Ahmad Ali.", image: "https://placehold.co/600x400?text=Prestasi+Siswa" }
        ];

        const initialGalleryData = [
            { id: 1, title: "Upacara Bendera", category: "Rutin", image: "upacara.jpg", images: ["upacara.jpg", "https://placehold.co/600x400?text=Upacara"] },
            { id: 2, title: "Polisi Cilik", category: "Ekskul", image: "kegiatan1.jpg", images: ["kegiatan1.jpg"] },
            { id: 3, title: "Kegiatan ANBK", category: "ANBK", image: "kegiatan3.jpg", images: ["kegiatan3.jpg"] }
        ];

        // --- ICONS ---
        const Icon = ({ name, className }) => {
            const icons = {
                school: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m4 6 8-4 8 4"/><path d="m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"/><path d="M14 22v-4a2 2 0 1 0-4 0v4"/><path d="M18 5v17"/><path d="M6 5v17"/><circle cx="12" cy="9" r="2"/></svg>,
                "map-pin": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
                users: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
                clock: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
                award: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>,
                "calendar-days": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>,
                "building-2": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>,
                info: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
                menu: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
                x: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 18 12"/></svg>,
                "external-link": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>,
                "book-open": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
                mail: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
                "file-text": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>,
                newspaper: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg>,
                "check-circle": <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
                phone: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
                image: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>,
                trash: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>,
                lock: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
                upload: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>,
                refresh: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
                plus: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
                edit: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>,
                save: <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
            };
            return icons[name] || null;
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div className="bg-white rounded-lg max-w-4xl w-full p-6 relative animate-fade-in shadow-2xl" onClick={e => e.stopPropagation()}>
                        <button onClick={onClose} className="absolute top-4 right-4 text-gray-500 hover:text-red-500 z-10"><Icon name="x" className="w-6 h-6" /></button>
                        {title && <h3 className="text-2xl font-bold mb-4 text-red-900 border-b pb-2">{title}</h3>}
                        <div className="overflow-y-auto max-h-[85vh] custom-content">{children}</div>
                    </div>
                </div>
            );
        };
        
        const NewsCard = ({ news, onClick }) => (
            <div onClick={() => onClick(news)} className="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-all cursor-pointer group border border-gray-100 flex flex-col h-full">
                <div className="h-48 relative overflow-hidden">
                    <img src={news.image} alt={news.title} className="w-full h-full object-cover group-hover:scale-105 transition-transform" />
                    <div className="absolute top-3 right-3 bg-red-600 text-white text-xs px-2 py-1 rounded">{news.category}</div>
                </div>
                <div className="p-5 flex flex-col flex-1">
                    <div className="text-gray-500 text-xs mb-2 flex items-center gap-1"><Icon name="calendar-days" className="w-3 h-3" /> {news.date}</div>
                    <h4 className="font-bold text-lg text-gray-800 mb-2 leading-tight group-hover:text-red-600 transition-colors">{news.title}</h4>
                    <p className="text-gray-600 text-sm line-clamp-3 mb-4 flex-1">{news.content}</p>
                    <button className="text-red-600 font-semibold text-sm hover:underline self-start">Baca Selengkapnya &rarr;</button>
                </div>
            </div>
        );

        const SectionTitle = ({ title, subtitle }) => (
            <div className="text-center mb-10">
                <h2 className="text-3xl font-bold text-gray-800 uppercase tracking-wide">{title}</h2>
                <div className="w-20 h-1 bg-red-600 mx-auto mt-2"></div>
                {subtitle && <p className="text-gray-600 mt-2 max-w-2xl mx-auto">{subtitle}</p>}
            </div>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState("Profil");
            const [teachers, setTeachers] = useState(initialTeacherData);
            const [students, setStudents] = useState(initialStudentData);
            const [newsList, setNewsList] = useState(initialNewsData);
            const [galleryList, setGalleryList] = useState(initialGalleryData);
            const [facilitiesList, setFacilitiesList] = useState(initialFacilities);
            const [rosters, setRosters] = useState(initialRosterData);
            const [calendars, setCalendars] = useState(initialCalendars);
            const [stats, setStats] = useState(initialStatsData);

            const [selectedTeacher, setSelectedTeacher] = useState(null);
            const [selectedStudent, setSelectedStudent] = useState(null);
            const [selectedFacility, setSelectedFacility] = useState(null);
            const [selectedExtra, setSelectedExtra] = useState(null);
            const [selectedNews, setSelectedNews] = useState(null);
            const [selectedGalleryImage, setSelectedGalleryImage] = useState(null);
            const [zoomedImage, setZoomedImage] = useState(null);
            const [selectedClass, setSelectedClass] = useState("Kelas 1");
            const [activeRosterClass, setActiveRosterClass] = useState("Kelas 1");

            const [isAdmin, setIsAdmin] = useState(false);
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [loginPassword, setLoginPassword] = useState("");
            const [migrationLoading, setMigrationLoading] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            
            // Add Data States
            const [showAddModal, setShowAddModal] = useState(false);
            const [addType, setAddType] = useState(null); 
            const [newData, setNewData] = useState({});

            // Edit Data States
            const [isEditingRoster, setIsEditingRoster] = useState(false);
            const [tempRoster, setTempRoster] = useState([]);

            // PPDB States
            const [showPPDBForm, setShowPPDBForm] = useState(false);
            const [ppdbData, setPpdbData] = useState({ nama: "", nik: "", tempatLahir: "", tanggalLahir: "", jenisKelamin: "L", namaOrtu: "", noHp: "", alamat: "" });
            const [ppdbSubmissions, setPpdbSubmissions] = useState([]);
            
            const [deleteModalOpen, setDeleteModalOpen] = useState(false);
            const [itemToDelete, setItemToDelete] = useState(null);
            const [collectionToDelete, setCollectionToDelete] = useState(null);
            const [user, setUser] = useState(null);

            useEffect(() => {
                if (!auth) return;
                const initAuth = async () => {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) await signInWithCustomToken(auth, __initial_auth_token);
                    else await signInAnonymously(auth);
                };
                initAuth();
                const unsubscribe = onAuthStateChanged(auth, setUser);
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if(!user) return;
                const unsubTeachers = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'teachers'), (snap) => { const data = snap.docs.map(d => ({ id: d.id, ...d.data() })); if (data.length > 0) setTeachers(data); });
                const unsubStudents = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'students'), (snap) => {
                    const data = snap.docs.map(d => ({ id: d.id, ...d.data() }));
                    if (data.length > 0) {
                        const newStudentData = {};
                        Object.keys(initialStudentData).forEach(k => newStudentData[k] = []);
                        data.forEach(s => { if (!newStudentData[s.className]) newStudentData[s.className] = []; newStudentData[s.className].push(s); });
                        setStudents(newStudentData);
                    }
                });
                const unsubNews = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'news'), (snap) => { const data = snap.docs.map(d => ({ id: d.id, ...d.data() })); if (data.length > 0) setNewsList(data); });
                const unsubGallery = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'gallery'), (snap) => { const data = snap.docs.map(d => ({ id: d.id, ...d.data() })); if (data.length > 0) setGalleryList(data); });
                const unsubFacilities = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'facilities'), (snap) => { const data = snap.docs.map(d => ({ id: d.id, ...d.data() })); if (data.length > 0) setFacilitiesList(data); });
                const unsubRosters = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'rosters'), (snap) => {
                    const data = {};
                    snap.docs.forEach(doc => { data[doc.id] = doc.data().data; });
                    if (Object.keys(data).length > 0) setRosters(data);
                });
                const unsubCalendars = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'calendars'), (snap) => { const data = snap.docs.map(d => ({ id: d.id, ...d.data() })); if (data.length > 0) setCalendars(data); });

                return () => { unsubTeachers(); unsubStudents(); unsubNews(); unsubGallery(); unsubFacilities(); unsubRosters(); unsubCalendars(); };
            }, [user]);

            useEffect(() => {
                if ((activeTab === "Data PPDB" || activeTab === "Admin") && user) {
                    try {
                        const q = query(collection(db, 'artifacts', appId, 'public', 'data', 'ppdb_registrations'), orderBy('createdAt', 'desc'));
                        const unsubscribe = onSnapshot(q, (snapshot) => {
                            const submissions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                            setPpdbSubmissions(submissions);
                        });
                        return () => unsubscribe();
                    } catch (err) { console.error("Setup listener failed", err); }
                }
            }, [activeTab, user]);

            useEffect(() => {
                if (activeRosterClass && rosters[activeRosterClass]) {
                    setTempRoster(rosters[activeRosterClass]);
                }
            }, [activeRosterClass, rosters, isEditingRoster]);

            const handleLogin = (e) => {
                e.preventDefault();
                if (loginPassword === "123456") { setIsAdmin(true); setShowLoginModal(false); setActiveTab("Admin"); setLoginPassword(""); } else { alert("Password Salah!"); }
            };

            const handleMigration = async () => {
                if (!auth.currentUser) { alert("Koneksi database belum siap."); return; }
                if (!confirm("Yakin ingin migrasi? Ini mungkin membuat duplikat.")) return;
                setMigrationLoading(true);
                try {
                    await Promise.all(initialTeacherData.map(t => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'teachers'), t)));
                    let allStudents = [];
                    Object.keys(initialStudentData).forEach(cls => { initialStudentData[cls].forEach(s => allStudents.push({ ...s, className: cls })); });
                    await Promise.all(allStudents.map(s => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'students'), s)));
                    await Promise.all(initialNewsData.map(n => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'news'), n)));
                    await Promise.all(initialGalleryData.map(g => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'gallery'), g)));
                    await Promise.all(initialFacilities.map(f => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'facilities'), f)));
                    await Promise.all(initialStatsData.map(s => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'stats'), s)));
                    // Migrate Roster (Document based on Class Name)
                    await Promise.all(Object.keys(initialRosterData).map(cls => setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'rosters', cls), { data: initialRosterData[cls] })));
                    await Promise.all(initialCalendars.map(c => addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'calendars'), c)));
                    
                    alert("Migrasi Data Berhasil!");
                } catch (e) { console.error("Migration Error:", e); alert("Gagal migrasi: " + e.message); }
                setMigrationLoading(false);
            };

            const promoteStudents = async () => {
                if(!confirm("PERINGATAN: Fitur ini akan menaikkan tingkat kelas SEMUA siswa (Contoh: Kelas 1 -> Kelas 2). Siswa Kelas 6 akan menjadi 'Lulus'. Lanjutkan?")) return;
                setIsSubmitting(true);
                try {
                    const q = query(collection(db, 'artifacts', appId, 'public', 'data', 'students'));
                    const snap = await getDocs(q);
                    const batch = writeBatch(db);
                    let count = 0;
                    snap.docs.forEach(docSnap => {
                        const s = docSnap.data();
                        let newClass = s.className;
                        if (s.className.startsWith("Kelas ")) {
                            const currentGrade = parseInt(s.className.split(" ")[1]);
                            if (currentGrade < 6) newClass = `Kelas ${currentGrade + 1}`;
                            else if (currentGrade === 6) newClass = "Lulus";
                        }
                        if (newClass !== s.className) {
                            batch.update(doc(db, 'artifacts', appId, 'public', 'data', 'students', docSnap.id), { className: newClass });
                            count++;
                        }
                    });
                    await batch.commit();
                    alert(`Berhasil memproses kenaikan kelas untuk ${count} siswa.`);
                } catch (e) { console.error(e); alert("Gagal: " + e.message); }
                setIsSubmitting(false);
            }

            const handleAdd = (type) => { setAddType(type); setNewData({}); setShowAddModal(true); };
            const handleNewDataChange = (e) => { const { name, value } = e.target; setNewData(prev => ({...prev, [name]: value})); };
            const handleSubmitNewData = async (e) => {
                e.preventDefault(); setIsSubmitting(true);
                try {
                    let colName = addType === 'teacher' ? 'teachers' : addType === 'student' ? 'students' : addType === 'news' ? 'news' : addType === 'gallery' ? 'gallery' : addType === 'calendar' ? 'calendars' : 'facilities';
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', colName), { ...newData, createdAt: serverTimestamp() });
                    alert("Data berhasil ditambahkan!"); setShowAddModal(false);
                } catch (error) { alert("Gagal: " + error.message); }
                setIsSubmitting(false);
            }

            // Roster Editing
            const handleRosterEditChange = (index, field, value) => {
                const updated = [...tempRoster];
                updated[index] = { ...updated[index], [field]: value };
                setTempRoster(updated);
            };
            const saveRoster = async () => {
                if(!confirm("Simpan perubahan jadwal?")) return;
                try {
                    await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'rosters', activeRosterClass), { data: tempRoster });
                    setIsEditingRoster(false); alert("Jadwal berhasil disimpan!");
                } catch (e) { alert("Gagal simpan: " + e.message); }
            };

            const confirmDelete = (id, collectionName) => { setItemToDelete(id); setCollectionToDelete(collectionName); setDeleteModalOpen(true); };
            const executeDelete = async () => {
                if (itemToDelete && collectionToDelete) {
                    try { await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', collectionToDelete, itemToDelete)); setDeleteModalOpen(false); } 
                    catch (error) { alert("Gagal menghapus data: " + error.message); }
                }
            };

            const handlePpdbChange = (e) => { const { name, value } = e.target; setPpdbData(prev => ({...prev, [name]: value})); };
            const handlePpdbSubmit = async (e) => {
                e.preventDefault(); if (!auth.currentUser) return; setIsSubmitting(true);
                try {
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'ppdb_registrations'), { ...ppdbData, createdAt: serverTimestamp() });
                    alert("Pendaftaran Berhasil!"); setShowPPDBForm(false); setActiveTab("Data PPDB"); setPpdbData({ nama: "", nik: "", tempatLahir: "", tanggalLahir: "", jenisKelamin: "L", namaOrtu: "", noHp: "", alamat: "" });
                } catch (error) { alert("Gagal menyimpan data."); }
                setIsSubmitting(false);
            };

            const renderContent = () => {
                switch(activeTab) {
                    case "Profil": return (
                        <div className="space-y-12 animate-fade-in">
                            <div className="bg-white p-8 rounded-xl shadow-sm border-l-4 border-red-600">
                                <h3 className="text-2xl font-bold text-red-900 mb-4 flex items-center gap-2"><Icon name="school" className="w-6 h-6" /> Karakteristik Sekolah</h3>
                                <div className="text-gray-700 leading-relaxed mb-4 space-y-3">
                                    <p>SD Negeri 0207 Pangirkiran beralamat di Desa Pangirkiran Dolok, Kecamatan Barumun Tengah, Kabupaten Padang Lawas. Secara geografis, sekolah ini terletak di daerah dataran tinggi yang sejuk.</p>
                                    <p className="bg-red-50 p-3 rounded-lg border border-red-100"><strong className="text-red-800 block mb-1">Kurikulum Merdeka</strong>SD Negeri 0207 Pangirkiran menerapkan Kurikulum Merdeka yang berfokus pada pengembangan karakter Profil Pelajar Pancasila.</p>
                                </div>
                                <div className="grid md:grid-cols-2 gap-4 text-sm text-gray-600 bg-gray-50 p-4 rounded-lg">
                                    <div className="flex items-center gap-2"><Icon name="map-pin" className="w-4 h-4 text-red-500" /> Desa Pangirkiran Dolok & Desa Janji Raja</div>
                                    <div className="flex items-center gap-2"><Icon name="users" className="w-4 h-4 text-red-500" /> 117 Siswa</div>
                                    <div className="flex items-center gap-2"><Icon name="book-open" className="w-4 h-4 text-red-500" /> Kurikulum Merdeka</div>
                                    <div className="flex items-center gap-2 md:col-span-2"><Icon name="award" className="w-4 h-4 text-red-500" /> Akreditasi C (NPSN: 10207504)  Est. 1977</div>
                                </div>
                            </div>
                            <div className="bg-white p-8 rounded-xl shadow-sm"><h3 className="text-xl font-bold mb-6 text-gray-800 text-center">Statistik Siswa</h3><div className="overflow-x-auto"><table className="w-full text-sm text-left text-gray-500"><thead className="text-xs text-gray-700 uppercase bg-gray-100"><tr><th className="px-6 py-3">Tahun</th><th className="px-6 py-3 text-center">L</th><th className="px-6 py-3 text-center">P</th><th className="px-6 py-3 text-center">Total</th></tr></thead><tbody>{stats.map((stat, idx) => (<tr key={idx} className="bg-white border-b hover:bg-gray-50"><td className="px-6 py-4">{stat.year}</td><td className="px-6 py-4 text-center">{stat.L}</td><td className="px-6 py-4 text-center">{stat.P}</td><td className="px-6 py-4 text-center font-bold">{stat.L + stat.P}</td></tr>))}</tbody></table></div></div>
                        </div>
                    );
                    case "Profil GTK": return (
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 animate-fade-in">
                            {teachers.map((teacher, idx) => (
                                <div key={idx} onClick={() => setSelectedTeacher(teacher)} className="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-xl transition-all cursor-pointer group border border-gray-100 relative">
                                    {isAdmin && teacher.id && (<button onClick={(e) => { e.stopPropagation(); confirmDelete(teacher.id, 'teachers'); }} className="absolute top-2 right-2 z-10 bg-red-600 text-white p-1 rounded-full shadow-md hover:bg-red-800"><Icon name="trash" className="w-4 h-4" /></button>)}
                                    <div className="aspect-[3/4] w-full bg-gray-200 relative overflow-hidden"><img src={teacher.image || `https://ui-avatars.com/api/?name=${teacher.name}`} onError={(e) => { e.target.onerror = null; e.target.src = `https://ui-avatars.com/api/?name=${teacher.name}`; }} className="w-full h-full object-cover" /><div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-4"><span className="text-white font-bold px-4 py-1 bg-red-600 rounded-full text-sm">Lihat Profil</span></div></div>
                                    <div className="p-4 text-center"><h4 className="font-bold text-gray-800 text-sm md:text-base line-clamp-1">{teacher.name}</h4><p className="text-xs text-red-600 mt-1 font-semibold">{teacher.role}</p></div>
                                </div>
                            ))}
                        </div>
                    );
                    case "Siswa": return (
                        <div className="grid md:grid-cols-3 gap-6 animate-fade-in">
                            <div className="md:col-span-1 space-y-2">
                                <h3 className="font-bold text-gray-700 mb-4 px-2">Pilih Kelas</h3>
                                {Object.keys(students).filter(k => k.startsWith('Kelas')).sort().map(cls => (
                                    <button key={cls} onClick={() => setSelectedClass(cls)} className={`w-full text-left px-4 py-3 rounded-lg flex justify-between items-center transition-all ${selectedClass === cls ? 'bg-red-600 text-white shadow-md' : 'bg-white hover:bg-gray-100 text-gray-700'}`}><span>{cls}</span><span className={`text-xs px-2 py-1 rounded-full ${selectedClass === cls ? 'bg-white text-red-600' : 'bg-gray-200 text-gray-600'}`}>{students[cls] ? students[cls].length : 0}</span></button>
                                ))}
                            </div>
                            <div className="md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h3 className="text-xl font-bold text-red-900 mb-6 border-b pb-4 flex items-center gap-2"><Icon name="users" className="w-5 h-5" /> Daftar Siswa {selectedClass}</h3>
                                <div className="overflow-y-auto max-h-[600px]"><ul className="grid md:grid-cols-2 gap-3">
                                    {students[selectedClass] && students[selectedClass].map((student, idx) => (
                                        <li key={idx} onClick={() => setSelectedStudent(student)} className="flex items-center gap-3 p-3 hover:bg-red-50 border border-gray-100 rounded-lg transition-colors cursor-pointer group relative">
                                            {isAdmin && student.id && (<button onClick={(e) => { e.stopPropagation(); confirmDelete(student.id, 'students'); }} className="absolute top-1 right-1 text-red-400 hover:text-red-700 p-1"><Icon name="trash" className="w-4 h-4" /></button>)}
                                            <div className="w-8 h-8 bg-red-100 text-red-600 rounded-full flex items-center justify-center text-xs font-bold group-hover:bg-red-600 group-hover:text-white transition-colors">{idx + 1}</div>
                                            <span className="text-sm font-medium text-gray-700">{student.name}</span>
                                        </li>
                                    ))}
                                    {(!students[selectedClass] || students[selectedClass].length === 0) && (<p className="text-gray-500 italic text-sm p-4 text-center col-span-2">Belum ada data siswa.</p>)}
                                </ul></div>
                            </div>
                        </div>
                    );
                    case "Akademik": return (
                        <div className="space-y-12 animate-fade-in">
                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                <div className="flex flex-col md:flex-row justify-between items-center mb-6">
                                    <h3 className="text-xl font-bold text-gray-800 flex items-center gap-2"><Icon name="calendar-days" className="w-6 h-6 text-red-600" /> Jadwal Pelajaran</h3>
                                    <div className="flex gap-2">
                                        {isAdmin && (
                                            isEditingRoster 
                                                ? <button onClick={saveRoster} className="bg-green-600 text-white px-3 py-1 rounded text-sm flex items-center gap-1"><Icon name="save" className="w-4 h-4" /> Simpan</button>
                                                : <button onClick={() => setIsEditingRoster(true)} className="bg-blue-600 text-white px-3 py-1 rounded text-sm flex items-center gap-1"><Icon name="edit" className="w-4 h-4" /> Edit Jadwal</button>
                                        )}
                                        <select value={activeRosterClass} onChange={(e) => setActiveRosterClass(e.target.value)} className="px-4 py-2 border rounded-lg bg-gray-50 outline-none">{Object.keys(rosters).sort().map(k => <option key={k} value={k}>{k}</option>)}</select>
                                    </div>
                                </div>
                                <div className="overflow-x-auto"><table className="w-full text-sm text-center border-collapse">
                                    <thead><tr className="bg-red-600 text-white"><th className="p-3 border">Jam</th><th className="p-3 border">Senin</th><th className="p-3 border">Selasa</th><th className="p-3 border">Rabu</th><th className="p-3 border">Kamis</th><th className="p-3 border">Jumat</th><th className="p-3 border">Sabtu</th></tr></thead>
                                    <tbody>
                                        {(isEditingRoster ? tempRoster : rosters[activeRosterClass] || []).map((row, idx) => (
                                            <tr key={idx} className="even:bg-gray-50 hover:bg-red-50">
                                                <td className="p-3 border font-bold text-gray-500">{isEditingRoster ? <input value={row.jam} onChange={(e) => handleRosterEditChange(idx, 'jam', e.target.value)} className="w-12 text-center border rounded"/> : row.jam}</td>
                                                {['sen','sel','rab','kam','jum','sab'].map(day => (
                                                    <td key={day} className="p-3 border">{isEditingRoster ? <input value={row[day]} onChange={(e) => handleRosterEditChange(idx, day, e.target.value)} className="w-full text-center border rounded"/> : row[day]}</td>
                                                ))}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table></div>
                            </div>
                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                <div className="flex justify-between items-center mb-4 border-b pb-2">
                                    <h3 className="font-bold text-lg text-gray-800">Kalender Akademik</h3>
                                    {isAdmin && <button onClick={() => handleAdd('calendar')} className="text-red-600 hover:bg-red-50 px-2 py-1 rounded text-sm">+ Tambah Agenda</button>}
                                </div>
                                <ul className="space-y-4">
                                    {calendars.map((c, i) => (
                                        <li key={i} className="flex gap-4 group">
                                            <div className="w-24 text-right text-xs font-bold text-gray-500 pt-1">{c.date}</div>
                                            <div className="flex-1 pb-4 border-l-2 border-red-200 pl-4 relative">
                                                <div className="absolute -left-[5px] top-1.5 w-2 h-2 bg-red-600 rounded-full"></div>
                                                <div className="flex justify-between">
                                                    <p className="text-sm font-medium">{c.event}</p>
                                                    {isAdmin && c.id && <button onClick={() => confirmDelete(c.id, 'calendars')} className="opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-700"><Icon name="trash" className="w-4 h-4" /></button>}
                                                </div>
                                                {c.type && <span className="text-[10px] bg-gray-100 px-2 rounded text-gray-500">{c.type}</span>}
                                            </div>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    );
                    case "Fasilitas": return (
                        <div className="space-y-12 animate-fade-in">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">{facilitiesList.map(fac => (<div key={fac.id} onClick={() => setSelectedFacility(fac)} className="bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-all cursor-pointer text-center border border-gray-100 group relative">{isAdmin && fac.id && <button onClick={(e) => { e.stopPropagation(); confirmDelete(fac.id, 'facilities'); }} className="absolute top-2 right-2 text-red-400 opacity-0 group-hover:opacity-100 hover:text-red-700"><Icon name="trash" className="w-4 h-4" /></button>}<div className="w-16 h-16 bg-red-50 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-red-600 group-hover:text-white transition-colors"><Icon name="building-2" className="w-8 h-8" /></div><h4 className="font-bold text-gray-800">{fac.name}</h4><p className="text-xs text-gray-500 mt-2">Klik untuk foto</p></div>))}</div>
                            <h3 className="text-xl font-bold mb-6 text-gray-800">Ekstrakurikuler</h3><div className="grid md:grid-cols-3 gap-6">{initialExtracurriculars.map(ex => (<div key={ex.id} onClick={() => setSelectedExtra(ex)} className="relative group cursor-pointer overflow-hidden rounded-xl shadow-md h-48"><div className="absolute inset-0 bg-gray-800"><img src={`https://placehold.co/600x400?text=${ex.name}`} className="w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity" /></div><div className="absolute bottom-0 left-0 p-6 text-white"><h4 className="text-xl font-bold mb-1">{ex.name}</h4><p className="text-sm opacity-90">{ex.desc}</p></div></div>))}</div>
                        </div>
                    );
                    case "Admin": return (
                        <div className="animate-fade-in space-y-8">
                            <div className="bg-white p-8 rounded-xl shadow-md border border-red-200">
                                <h3 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Icon name="lock" className="w-6 h-6 text-red-600" /> Dashboard Admin</h3>
                                <div className="bg-blue-50 p-6 rounded-lg border border-blue-100 mb-6">
                                    <h4 className="font-bold text-blue-800 mb-2 flex items-center gap-2"><Icon name="refresh" className="w-5 h-5" /> Migrasi Data Bawaan</h4>
                                    <p className="text-sm text-blue-600 mb-4">Klik tombol ini untuk mereset/mengupload ulang semua data bawaan (Siswa, Guru, Roster, Kalender) ke Firebase.</p>
                                    <button onClick={handleMigration} disabled={migrationLoading} className={`flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-md ${migrationLoading ? 'opacity-70' : ''}`}>{migrationLoading ? 'Sedang Memigrasi...' : 'Migrasi Semua Data ke Firebase'}</button>
                                </div>
                                <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                                    <h4 className="font-bold text-lg text-gray-800 mb-4 border-b pb-2">Kelola Konten & Data</h4>
                                    <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                                        <button onClick={() => handleAdd('teacher')} className="flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:text-red-600 border hover:border-red-200"><Icon name="users" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Guru Baru</span></button>
                                        <button onClick={() => handleAdd('student')} className="flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:text-red-600 border hover:border-red-200"><Icon name="users" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Siswa Baru</span></button>
                                        <button onClick={() => handleAdd('news')} className="flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:text-red-600 border hover:border-red-200"><Icon name="newspaper" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Berita Baru</span></button>
                                        <button onClick={() => handleAdd('gallery')} className="flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:text-red-600 border hover:border-red-200"><Icon name="image" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Galeri Baru</span></button>
                                        <button onClick={() => handleAdd('facility')} className="flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:text-red-600 border hover:border-red-200"><Icon name="building-2" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Fasilitas Baru</span></button>
                                        <button onClick={promoteStudents} className="flex flex-col items-center p-4 bg-orange-50 rounded-lg text-orange-700 hover:bg-orange-100 border border-orange-200"><Icon name="upload" className="w-6 h-6 mb-2" /><span className="text-xs font-bold">Naik Kelas Massal</span></button>
                                    </div>
                                </div>
                            </div>
                            <div className="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden">
                                <div className="p-6 border-b border-gray-100"><h3 className="text-xl font-bold text-gray-800">Pendaftar PPDB</h3></div>
                                <div className="overflow-x-auto"><table className="w-full text-sm text-left"><thead className="bg-gray-50 text-gray-700 uppercase font-bold border-b"><tr><th className="px-6 py-3">No</th><th className="px-6 py-3">Nama</th><th className="px-6 py-3">NIK</th><th className="px-6 py-3">Ortu</th><th className="px-6 py-3">HP</th><th className="px-6 py-3 text-center">Aksi</th></tr></thead><tbody>{ppdbSubmissions.length === 0 ? (<tr><td colSpan="6" className="p-6 text-center text-gray-500">Belum ada data.</td></tr>) : ppdbSubmissions.map((data, idx) => (<tr key={data.id} className="border-b hover:bg-gray-50"><td className="px-6 py-4">{idx + 1}</td><td className="px-6 py-4 font-bold">{data.nama}</td><td className="px-6 py-4">{data.nik}</td><td className="px-6 py-4">{data.namaOrtu}</td><td className="px-6 py-4">{data.noHp}</td><td className="px-6 py-4 text-center"><button onClick={() => confirmDelete(data.id, 'ppdb_registrations')} className="text-red-600 hover:bg-red-50 p-2 rounded"><Icon name="trash" className="w-5 h-5" /></button></td></tr>))}</tbody></table></div>
                            </div>
                        </div>
                    );
                    case "Data PPDB": return (
                        <div className="space-y-8 animate-fade-in"><div className="text-center"><h3 className="text-2xl font-bold text-gray-800">Data Pendaftar PPDB</h3><p className="text-gray-600">Data Realtime Database</p></div><div className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><div className="overflow-x-auto"><table className="w-full text-sm text-left"><thead className="bg-gray-50 text-gray-700 uppercase font-bold border-b"><tr><th className="px-6 py-3">No</th><th className="px-6 py-3">Nama Siswa</th><th className="px-6 py-3">L/P</th><th className="px-6 py-3">TTL</th><th className="px-6 py-3">Nama Orang Tua</th><th className="px-6 py-3">No. HP</th><th className="px-6 py-3 text-center">Aksi</th></tr></thead><tbody className="divide-y divide-gray-100">{ppdbSubmissions.length === 0 ? (<tr><td colSpan="8" className="px-6 py-8 text-center text-gray-500 italic">Belum ada data pendaftar.</td></tr>) : (ppdbSubmissions.map((data, idx) => (<tr key={data.id} className="hover:bg-gray-50 transition-colors"><td className="px-6 py-4 font-medium text-gray-900">{idx + 1}</td><td className="px-6 py-4 font-bold text-gray-800">{data.nama}</td><td className="px-6 py-4"><span className={`px-2 py-1 rounded text-xs font-bold ${data.jenisKelamin === 'L' ? 'bg-blue-100 text-blue-700' : 'bg-pink-100 text-pink-700'}`}>{data.jenisKelamin}</span></td><td className="px-6 py-4">{data.tempatLahir}, {data.tanggalLahir}</td><td className="px-6 py-4">{data.namaOrtu}</td><td className="px-6 py-4 font-mono text-gray-600">{data.noHp}</td><td className="px-6 py-4 text-center"><button onClick={() => confirmDelete(data.id, 'ppdb_registrations')} className="text-red-600 hover:text-red-800 hover:bg-red-50 p-2 rounded-full transition-colors" title="Hapus Data"><Icon name="trash" className="w-5 h-5" /></button></td></tr>)))}</tbody></table></div><div className="bg-gray-50 px-6 py-3 border-t text-xs text-gray-500 flex justify-between items-center"><span>Total Pendaftar: <strong>{ppdbSubmissions.length}</strong></span></div></div></div>
                    );
                    case "PPDB": if(showPPDBForm) return (
                        <div className="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-lg animate-fade-in border border-gray-200"><div className="flex items-center gap-3 mb-6 border-b pb-4"><button onClick={() => setShowPPDBForm(false)} className="text-gray-500 hover:text-red-600"><Icon name="x" className="w-6 h-6" /></button><h3 className="text-2xl font-bold text-gray-800">Formulir Pendaftaran</h3></div><form onSubmit={handlePpdbSubmit} className="space-y-4"><div><label className="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label><input type="text" name="nama" required value={ppdbData.nama} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div><div className="grid md:grid-cols-2 gap-4"><div><label className="block text-sm font-medium text-gray-700 mb-1">NIK</label><input type="number" name="nik" required value={ppdbData.nik} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div><div><label className="block text-sm font-medium text-gray-700 mb-1">Jenis Kelamin</label><select name="jenisKelamin" value={ppdbData.jenisKelamin} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none"><option value="L">Laki-laki</option><option value="P">Perempuan</option></select></div></div><div className="grid md:grid-cols-2 gap-4"><div><label className="block text-sm font-medium text-gray-700 mb-1">Tempat Lahir</label><input type="text" name="tempatLahir" required value={ppdbData.tempatLahir} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div><div><label className="block text-sm font-medium text-gray-700 mb-1">Tanggal Lahir</label><input type="date" name="tanggalLahir" required value={ppdbData.tanggalLahir} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div></div><div><label className="block text-sm font-medium text-gray-700 mb-1">Nama Orang Tua</label><input type="text" name="namaOrtu" required value={ppdbData.namaOrtu} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div><div><label className="block text-sm font-medium text-gray-700 mb-1">Nomor HP</label><input type="tel" name="noHp" required value={ppdbData.noHp} onChange={handlePpdbChange} className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none" /></div><div><label className="block text-sm font-medium text-gray-700 mb-1">Alamat</label><textarea name="alamat" required value={ppdbData.alamat} onChange={handlePpdbChange} rows="3" className="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 outline-none"></textarea></div><div className="pt-4 flex gap-3"><button type="button" onClick={() => setShowPPDBForm(false)} className="flex-1 px-4 py-2 border border-gray-300 rounded-lg">Batal</button><button type="submit" disabled={isSubmitting} className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg">{isSubmitting ? 'Mengirim...' : 'Kirim'}</button></div></form></div>
                    ); return (<div className="space-y-8 animate-fade-in"><div className="bg-red-50 border-l-4 border-red-600 p-6 rounded-r-lg shadow-sm"><h3 className="text-2xl font-bold text-red-900 mb-2 flex items-center gap-2"><Icon name="file-text" className="w-6 h-6" /> PPDB Online</h3><p className="text-gray-700 mt-2">Daftarkan putra-putri Anda sekarang.</p><div className="mt-4 flex gap-3"><button onClick={() => setShowPPDBForm(true)} className="bg-red-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-700 transition-colors shadow">Daftar Sekarang</button></div></div></div>);
                    case "Galeri": return (<div className="animate-fade-in space-y-6"><div className="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">{galleryList.map(item => (<div key={item.id} className="group relative cursor-pointer overflow-hidden rounded-xl shadow-md aspect-square bg-gray-100" onClick={() => setSelectedGalleryImage(item)}>{isAdmin && item.id && <button onClick={(e) => { e.stopPropagation(); confirmDelete(item.id, 'gallery'); }} className="absolute top-2 right-2 z-10 text-red-600 bg-white rounded-full p-1 opacity-0 group-hover:opacity-100"><Icon name="trash" className="w-4 h-4" /></button>}<img src={item.image} className="h-full w-full object-cover transition-transform duration-300 group-hover:scale-110" /><div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-2"><span className="text-[10px] text-red-200 font-semibold mb-0.5 uppercase tracking-wider">{item.category}</span><h4 className="text-white font-bold text-xs leading-tight line-clamp-2">{item.title}</h4></div></div>))}</div></div>);
                    case "Berita & Pengumuman": return (<div className="animate-fade-in space-y-6"><div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">{newsList.map(news => (<div key={news.id} className="relative group"><NewsCard news={news} onClick={setSelectedNews} />{isAdmin && news.id && <button onClick={(e) => { e.stopPropagation(); confirmDelete(news.id, 'news'); }} className="absolute top-2 right-2 z-10 bg-red-600 text-white p-2 rounded-full shadow hover:bg-red-800"><Icon name="trash" className="w-4 h-4" /></button>}</div>))}</div></div>);
                }
            };

            return (
                <div className="min-h-screen flex flex-col hero-pattern">
                    <nav className="bg-white shadow-md sticky top-0 z-40 border-b border-gray-200"><div className="container mx-auto px-4"><div className="flex justify-between items-center h-20"><div className="flex items-center gap-3"><img src="logo-padang-lawas.jpg" onError={(e) => e.target.style.display='none'} className="h-10 w-auto" alt="Logo" /><div className="leading-tight"><h1 className="text-lg md:text-xl font-bold text-gray-900 tracking-tight">SD NEGERI 0207</h1><p className="text-xs text-red-600 font-semibold tracking-wider">PANGIRKIRAN</p></div></div><div className="hidden lg:flex gap-6">{["Profil", "Profil GTK", "Siswa", "Akademik", "PPDB", "Data PPDB", "Galeri", "Berita & Pengumuman", "Fasilitas", ...(isAdmin ? ["Admin"] : [])].map(menu => (<button key={menu} onClick={() => setActiveTab(menu)} className={`text-sm font-medium transition-colors border-b-2 py-1 ${activeTab === menu ? 'border-red-600 text-red-600' : 'border-transparent text-gray-500 hover:text-gray-900'}`}>{menu === "Berita & Pengumuman" ? "Berita" : menu}</button>))}</div><div className="lg:hidden"><button className="text-gray-600"><Icon name="menu" className="w-6 h-6" /></button></div></div><div className="lg:hidden flex overflow-x-auto gap-4 py-2 scrollbar-hide">{["Profil", "Profil GTK", "Siswa", "Akademik", "PPDB", "Data PPDB", "Galeri", "Berita & Pengumuman", "Fasilitas", ...(isAdmin ? ["Admin"] : [])].map(menu => (<button key={menu} onClick={() => setActiveTab(menu)} className={`whitespace-nowrap px-3 py-1 rounded-full text-xs font-bold ${activeTab === menu ? 'bg-red-600 text-white' : 'bg-gray-100 text-gray-600'}`}>{menu}</button>))}</div></div></nav>
                    {activeTab === "Profil" && (<div className="relative h-[400px] w-full bg-gray-900 flex items-center justify-center overflow-hidden"><img src="banner-sekolah.jpg" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/1200x400/1e3a8a/ffffff?text=SD+Negeri+0207+Pangirkiran"; }} className="absolute inset-0 w-full h-full object-cover opacity-90" /><div className="absolute inset-0 bg-gradient-to-t from-red-900/60 via-red-500/10 to-transparent"></div><div className="relative z-10 container mx-auto px-4 text-center text-white h-full flex flex-col justify-center"><img src="logo-padang-lawas.jpg" onError={(e) => e.target.style.display='none'} className="hidden md:block absolute left-8 top-1/2 -translate-y-1/2 h-40 w-auto drop-shadow-lg bg-white rounded-full p-2 transition-transform hover:scale-110" /><img src="logo-tutwuri.png" onError={(e) => e.target.style.display='none'} className="hidden md:block absolute right-8 top-1/2 -translate-y-1/2 h-40 w-auto drop-shadow-lg bg-white rounded-full p-2 transition-transform hover:scale-110" /><div className="md:px-32"><h2 className="text-3xl md:text-5xl font-bold mb-4 drop-shadow-md tracking-wide">SD NEGERI 0207 PANGIRKIRAN</h2><p className="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto italic font-light">"Terwujudnya Peserta Didik Yang Akhlak Mulia Berilmu Berprestasi Dan Berwawasan Global"</p></div><div className="mt-8 flex gap-3 justify-center"><a href="#sambutan" className="px-6 py-2 bg-red-600 hover:bg-red-700 rounded-full font-semibold transition-all shadow-lg hover:shadow-xl">Sambutan Kepala Sekolah</a><a href="#kontak" className="px-6 py-2 bg-white text-gray-900 hover:bg-gray-100 rounded-full font-semibold transition-all shadow-lg hover:shadow-xl">Hubungi Kami</a></div></div></div>)}
                    <main className="container mx-auto px-4 py-12 flex-grow">
                        {activeTab === "Profil" && (<section id="sambutan" className="mb-16 scroll-mt-24"><div className="bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col md:flex-row"><div className="md:w-1/3 bg-red-50 relative h-[500px] md:h-auto"><img src="nuraini.jpg" onError={(e) => { e.target.onerror = null; e.target.src = "https://placehold.co/400x500/e2e8f0/1e293b?text=Foto+Kepsek"; }} className="absolute inset-0 w-full h-full object-cover object-top" /><div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-red-900 to-transparent p-6 pt-20"><h3 className="text-white font-bold text-xl">Nuraini Nasution, S.Pd.I</h3><p className="text-red-200 text-sm">Kepala Sekolah</p></div></div><div className="md:w-2/3 p-8 md:p-12"><h2 className="text-3xl font-bold text-gray-800 mb-6 relative inline-block">Sambutan Kepala Sekolah<span className="absolute bottom-0 left-0 w-1/2 h-1 bg-red-600 rounded-full"></span></h2><div className="space-y-4 text-gray-600 leading-relaxed text-justify"><p className="font-semibold text-gray-800">Assalamu'alaikum Warahmatullahi Wabarakatuh,</p><p>Puji syukur kita panjatkan kehadirat Allah SWT... (Text singkat)</p><p className="font-semibold text-gray-800">Wassalamu'alaikum Warahmatullahi Wabarakatuh.</p></div></div></div></section>)}
                        <SectionTitle title={activeTab} />
                        {renderContent()}
                        <Modal isOpen={selectedTeacher} onClose={() => setSelectedTeacher(null)} title="Profil Pendidik">{selectedTeacher && (<div className="text-center md:text-left md:flex gap-6"><img src={selectedTeacher.image} className="w-32 h-40 rounded-lg mx-auto md:mx-0 object-cover border-4 border-white shadow-lg" /><div className="space-y-3 flex-1"><div><span className="text-xs text-gray-500 block uppercase">Nama Lengkap</span><span className="font-bold text-lg">{selectedTeacher.name}</span></div><div><span className="text-xs text-gray-500 block uppercase">Jabatan</span><span className="text-red-600 font-medium">{selectedTeacher.role}</span></div><div className="grid grid-cols-2 gap-2 mt-4 bg-gray-50 p-3 rounded text-left"><div><span className="text-xs text-gray-500 block">NIP</span><span className="text-sm font-medium">{selectedTeacher.nip || "-"}</span></div><div><span className="text-xs text-gray-500 block">NUPTK</span><span className="text-sm font-medium">{selectedTeacher.nuptk || "-"}</span></div><div className="col-span-2"><span className="text-xs text-gray-500 block">Pendidikan</span><span className="text-sm font-medium">{selectedTeacher.education}</span></div></div></div></div>)}</Modal>
                        <Modal isOpen={selectedStudent} onClose={() => setSelectedStudent(null)} title="Profil Siswa">{selectedStudent && (<div className="text-center md:text-left md:flex gap-6"><img src={`https://ui-avatars.com/api/?name=${selectedStudent.name}`} className="w-32 h-32 rounded-full mx-auto md:mx-0 shadow-lg" /><div className="space-y-3 flex-1"><div><span className="text-xs text-gray-500 block uppercase">Nama</span><span className="font-bold text-lg">{selectedStudent.name}</span></div><div className="grid grid-cols-2 gap-2 mt-4 bg-gray-50 p-3 rounded text-left"><div><span className="text-xs text-gray-500 block">NISN</span><span className="text-sm font-medium">{selectedStudent.nisn || "-"}</span></div><div><span className="text-xs text-gray-500 block">Ortu</span><span className="text-sm font-medium">{selectedStudent.parent || "-"}</span></div></div></div></div>)}</Modal>
                        <Modal isOpen={selectedFacility} onClose={() => setSelectedFacility(null)} title="Detail Fasilitas">{selectedFacility && (<div><img src={`https://placehold.co/600x400?text=${selectedFacility.name}`} className="w-full rounded-lg mb-4 shadow-md" /><p className="text-gray-700">{selectedFacility.desc}</p></div>)}</Modal>
                        <Modal isOpen={selectedExtra} onClose={() => setSelectedExtra(null)} title="Kegiatan Ekstrakurikuler">{selectedExtra && (<div><img src={`https://placehold.co/600x400?text=${selectedExtra.name}`} className="w-full rounded-lg mb-4 shadow-md" /><p className="text-gray-700">{selectedExtra.desc}</p></div>)}</Modal>
                        <Modal isOpen={selectedNews} onClose={() => setSelectedNews(null)} title="Detail Berita">{selectedNews && (<div className="space-y-4"><img src={selectedNews.image} className="w-full rounded-lg shadow-md h-64 object-cover" /><div className="flex items-center gap-2 text-sm text-gray-500"><Icon name="calendar-days" className="w-4 h-4" /> {selectedNews.date}</div><h4 className="text-xl font-bold text-gray-900">{selectedNews.title}</h4><p className="text-gray-700">{selectedNews.content}</p></div>)}</Modal>
                        <Modal isOpen={selectedGalleryImage} onClose={() => setSelectedGalleryImage(null)} title="">{selectedGalleryImage && (<div><div className="mb-4"><h4 className="font-bold text-xl text-center text-gray-800">{selectedGalleryImage.title}</h4><div className="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar">{(selectedGalleryImage.images || [selectedGalleryImage.image]).map((img, index) => (<img key={index} src={img} className="w-full h-48 object-cover rounded shadow cursor-zoom-in" onClick={() => setZoomedImage(img)} />))}</div></div><div className="text-center"><button onClick={() => setSelectedGalleryImage(null)} className="px-6 py-2 bg-red-600 text-white rounded-full text-sm">Tutup</button></div></div>)}</Modal>
                        {showLoginModal && (<div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[70] p-4"><div className="bg-white rounded-lg max-w-sm w-full p-6 shadow-2xl relative"><button onClick={() => setShowLoginModal(false)} className="absolute top-4 right-4 text-gray-500"><Icon name="x" className="w-5 h-5" /></button><h3 className="text-xl font-bold text-gray-800 mb-4 text-center">Login Admin</h3><form onSubmit={handleLogin} className="space-y-4"><input type="password" value={loginPassword} onChange={(e) => setLoginPassword(e.target.value)} className="w-full px-4 py-2 border rounded-lg text-center tracking-widest text-lg" placeholder="" autoFocus /><button type="submit" className="w-full bg-red-600 text-white py-2 rounded-lg font-bold">Masuk</button></form></div></div>)}
                        {deleteModalOpen && (<div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4"><div className="bg-white rounded-lg max-w-sm w-full p-6 shadow-2xl"><div className="text-center mb-6"><h3 className="text-xl font-bold text-gray-900">Hapus Data?</h3><p className="text-gray-500 text-sm mt-2">Tindakan ini tidak dapat dibatalkan.</p></div><div className="flex gap-3"><button onClick={() => setDeleteModalOpen(false)} className="flex-1 px-4 py-2 border rounded-lg">Batal</button><button onClick={executeDelete} className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg">Hapus</button></div></div></div>)}
                        {showAddModal && (<div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[70] p-4"><div className="bg-white rounded-lg max-w-2xl w-full p-6 shadow-2xl relative"><button onClick={() => setShowAddModal(false)} className="absolute top-4 right-4 text-gray-500"><Icon name="x" className="w-5 h-5" /></button><h3 className="text-xl font-bold text-gray-800 mb-6 border-b pb-2">Tambah Data</h3><form onSubmit={handleSubmitNewData} className="space-y-4">
                            {addType === 'teacher' && (<div className="grid md:grid-cols-2 gap-4"><input type="text" name="name" placeholder="Nama" required onChange={handleNewDataChange} className="border p-2 rounded" /><input type="text" name="role" placeholder="Jabatan" required onChange={handleNewDataChange} className="border p-2 rounded" /><input type="text" name="nip" placeholder="NIP" onChange={handleNewDataChange} className="border p-2 rounded" /><input type="text" name="image" placeholder="URL Foto" onChange={handleNewDataChange} className="border p-2 rounded" /></div>)}
                            {addType === 'student' && (<div className="grid md:grid-cols-2 gap-4"><input type="text" name="name" placeholder="Nama" required onChange={handleNewDataChange} className="border p-2 rounded" /><select name="className" required onChange={handleNewDataChange} className="border p-2 rounded"><option value="">Pilih Kelas</option>{Object.keys(initialStudentData).map(k => <option key={k} value={k}>{k}</option>)}</select><select name="gender" onChange={handleNewDataChange} className="border p-2 rounded"><option value="L">Laki-laki</option><option value="P">Perempuan</option></select><input type="text" name="nisn" placeholder="NISN" onChange={handleNewDataChange} className="border p-2 rounded" /></div>)}
                            {addType === 'news' && (<><input type="text" name="title" placeholder="Judul" required onChange={handleNewDataChange} className="w-full border p-2 rounded" /><textarea name="content" placeholder="Isi Berita" rows="4" className="w-full border p-2 rounded" onChange={handleNewDataChange}></textarea><input type="date" name="date" required onChange={handleNewDataChange} className="border p-2 rounded" /></>)}
                            {addType === 'calendar' && (<div className="grid gap-4"><input type="text" name="event" placeholder="Nama Kegiatan" required onChange={handleNewDataChange} className="border p-2 rounded" /><input type="text" name="date" placeholder="Tanggal (contoh: 17 Agustus)" required onChange={handleNewDataChange} className="border p-2 rounded" /><select name="type" onChange={handleNewDataChange} className="border p-2 rounded"><option value="sekolah">Sekolah</option><option value="libur">Libur</option><option value="ujian">Ujian</option></select></div>)}
                            <button type="submit" disabled={isSubmitting} className="w-full bg-red-600 text-white py-2 rounded-lg">{isSubmitting ? 'Menyimpan...' : 'Simpan'}</button>
                        </form></div></div>)}
                    </main>
                    {zoomedImage && (<div className="fixed inset-0 z-[100] bg-black bg-opacity-95 flex items-center justify-center p-4 cursor-zoom-out" onClick={() => setZoomedImage(null)}><img src={zoomedImage} className="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl" /></div>)}
                    <footer id="kontak" className="bg-gray-900 text-gray-300 py-12"><div className="container mx-auto px-4"><div className="grid md:grid-cols-3 gap-8 mb-8"><div><h4 className="text-white font-bold text-lg mb-4">SD NEGERI 0207 PANGIRKIRAN</h4><p className="text-sm">Membangun generasi cerdas.</p></div><div><h4 className="text-white font-bold text-lg mb-4">Tautan</h4><ul className="text-sm"><li>Dapodik</li><li>Info GTK</li></ul></div><div><h4 className="text-white font-bold text-lg mb-4">Lokasi</h4><p className="text-xs">Desa Pangirkiran Dolok</p></div></div><div className="border-t border-gray-800 pt-8 text-center text-sm relative"><p>&copy; 2025 SD Negeri 0207 Pangirkiran.</p><button onClick={() => setShowLoginModal(true)} className="absolute bottom-0 right-0 text-gray-700 hover:text-gray-500 p-2"><Icon name="lock" className="w-4 h-4" /></button></div></div></footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>